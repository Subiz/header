syntax = "proto2";

package content;

message KeyValue {
	optional string key = 3;
	optional string value = 4;
}

message Content {

	optional string id = 2; // user input id
	optional string account_id = 3;
	optional string description = 5;
	optional string title = 6;
	optional string link = 7;
	repeated string labels = 8;
	optional bool availability = 9;
	optional string price = 10;
	optional string currency = 11;
	optional string sale_price = 12;
	repeated KeyValue fields = 13;
	repeated string categories = 14;
	repeated string related_ids = 15;
	optional string attachment_url = 16;
}

message Contents {
	repeated Content contents = 1;
}

message Ids {
	repeated string Ids = 2;
}

message Id {
	optional string id = 2;
	optional string account_id = 3;
}

message Empty {}

message ListRequest {
	optional string account_id = 6;
	optional string start_id = 2;
	optional string category = 3;
	optional int32 limit = 4;
}

service ContentMgr {
	rpc Insert(Content) returns (Empty) {}
	rpc InsertBulk (Contents) returns (Empty) {}
	rpc Delete(Id) returns (Empty) {}
	rpc DeleteBulk (Ids) returns (Empty) {}
	rpc Read(Id) returns (Content) {}
	rpc List(ListRequest) returns (Contents) {}
}
