syntax = "proto2";

import "git.subiz.net/header/common/common.proto";

package content;

message AllType {
	optional Content content = 2;
	optional Contents contents = 3;
	optional ListRequest lr = 5;
}

service MyServer {
	rpc Do(AllType) returns(AllType);
	rpc Ping(common.PingRequest) returns (common.Pong);
}

message KeyValue {
	optional string key = 3;
	optional string value = 4;
}

message Content {
	optional common.Context ctx = 1;
	optional string sbid = 2;
	optional string id = 3; // user input id
	optional string account_id = 4;

	optional string description = 5;
	optional string title = 6;
	optional string url = 7;
	repeated string labels = 8;
	optional string availability = 9;
	optional float price = 10;
	optional string currency = 11;
	optional float sale_price = 12;
	repeated KeyValue fields = 13;
	repeated string categories = 14;
	repeated string relates = 15;
	repeated string attachment_urls = 16;
	optional string type = 17;
}

message Contents {
	optional common.Context ctx = 1;
	repeated Content contents = 2;
}

message ListRequest {
	optional string account_id = 6;
	optional string anchor = 2;
	optional string category = 3;
	optional int32 limit = 4;
	optional string label = 5;
	optional string query = 7;
}
