{"swagger":"2.0","info":{"description":"This is a sample server Petstore server. You can find out more about Swagger at [http://swagger.io](http://swagger.io) or on [irc.freenode.net, #swagger](http://swagger.io/irc/). For this sample, you can use the api key `special-key` to test the authorization filters.","version":"4.0","title":"Account","termsOfService":"https://subiz.com/terms/","contact":{"email":"apiteam@subiz.com"},"license":{"name":"Apache 2.0","url":"http://www.apache.org/licenses/LICENSE-2.0.html"}},"host":"api.subiz.com","basePath":"/v4","tags":[{"name":"account","description":"Operattion on account"},{"name":"agent","description":"Operattion on agent"},{"name":"chat","description":"Operattion on chat"}],"schemes":["https"],"paths":{"/accounts/":{"post":{"tags":["accounts"],"consumes":["applucation/json"],"produces":["application/json"],"summary":"add new account to the sotre","description":"","operationId":"AddAccount","responses":{"400":{"$ref":"#/responses/BadRequest"},"401":{"$ref":"#/responses/Unauthorized"},"403":{"$ref":"#/responses/Forbidden"},"404":{"$ref":"#/responses/NotFound"},"429":{"$ref":"#/responses/TooManyRequests"},"500":{"$ref":"#/responses/InternalServerError"}}}},"/agents":{"post":{"tags":["agents"],"consumes":["applucation/json"],"produces":["application/json"],"summary":"add new agent to the account","description":"","operationId":"AddAgent","responses":{"400":{"$ref":"#/responses/BadRequest"},"401":{"$ref":"#/responses/Unauthorized"},"403":{"$ref":"#/responses/Forbidden"},"404":{"$ref":"#/responses/NotFound"},"405":{"description":"invalid input"},"429":{"$ref":"#/responses/TooManyRequests"},"500":{"$ref":"#/responses/InternalServerError"}}}},"/chats":{"post":{"tags":["chats"],"consumes":["application/json"],"produces":["application/json"],"summary":"start new chat","description":"","operationId":"StartChat","parameters":[{"name":"haha","in":"body","description":"123","schema":{"$ref":"#/definitions/ChatEvent"}}],"responses":{"200":{"description":"Chat created","schema":{"$ref":"#/definitions/Id"}},"400":{"$ref":"#/responses/BadRequest"},"401":{"$ref":"#/responses/Unauthorized"},"403":{"$ref":"#/responses/Forbidden"},"404":{"$ref":"#/responses/NotFound"},"429":{"$ref":"#/responses/TooManyRequests"},"500":{"$ref":"#/responses/InternalServerError"}}}},"/chats/{ChatId}/events":{"post":{"tags":["chats"],"consumes":["application/json"],"produces":["application/json"],"summary":"create new event","description":"","operationId":"SendChat","parameters":[{"name":"ChatId","in":"path","description":"Id of chat session","required":true,"type":"string"},{"name":"chatevent","in":"body","description":"chat event","required":true,"schema":{"$ref":"#/definitions/ChatEvent"}}],"responses":{"200":{"description":"a chat event id","schema":{"$ref":"#/definitions/Id"}},"400":{"$ref":"#/responses/BadRequest"},"401":{"$ref":"#/responses/Unauthorized"},"403":{"$ref":"#/responses/Forbidden"},"404":{"$ref":"#/responses/NotFound"},"429":{"$ref":"#/responses/TooManyRequests"},"500":{"$ref":"#/responses/InternalServerError"}}}}},"definitions":{"chatAssignStrategy":{"type":"string","enum":["Unsetted","AllAgents","Group","SpecificAgent","MostRecent","RoundRobinAllAgents","RoundRobinAgents"],"default":"Unsetted"},"chatAttachment":{"type":"object","properties":{"Type":{"type":"string","description":"+ receipt, ticket, ...\n    - quick_replies\n      + ask_form\n      + generic_template\n      + list_template\n  Input control\n    - button           -> send list of event to chat\n    - url\n    - postback_button (single button)\n    - textbox           -> contains value\n    - ratebox            -> rate the chat (like 5 buttons but have beautiful display)","title":"Type show type of attachment\nValue:\n  Template\n    - file\n      + video\n      + audio\n      + image\n    - preview (preview for link)\n    - content\n    - template"},"Payload":{"type":"string"}}},"chatChat":{"type":"object","properties":{"Id":{"type":"string"},"AccountId":{"type":"string"},"CreatedTime":{"type":"string","title":"Creation time"},"LTime":{"type":"string","title":"Last active time"},"XTime":{"type":"string","title":"Closed time"},"Users":{"type":"array","items":{"$ref":"#/definitions/chatUser"}},"EventsCount":{"type":"integer","format":"int32"},"ChannelId":{"type":"string"},"Tags":{"type":"array","items":{"type":"string"}},"MutedUserIds":{"type":"array","items":{"$ref":"#/definitions/chatId"}}},"title":"get number of unread message"},"chatChatEvent":{"type":"object","properties":{"Id":{"type":"string","title":"ID of chat evet"},"Type":{"$ref":"#/definitions/chatChatEventType","title":"Type indicates type of chat event"},"ChatId":{"type":"string","title":"ChatId refer to ID of chat which contains this chat event"},"CreatedTime":{"type":"string","title":"CreatedTime is a RFC3339 string, tell when was event sent"},"SenderId":{"type":"string","title":"SenderId refer to who has sent the event, could be Agent, User or System"},"SenderType":{"$ref":"#/definitions/chatUserType","title":"SenderType indicate type of sender"},"Text":{"type":"string","title":"Content could be raw text, could be JSON data based on type"},"Format":{"type":"string","title":"Could be \"\", \"raw\" or \"markdown\""},"Attachments":{"type":"array","items":{"$ref":"#/definitions/chatAttachment"}}}},"chatChatEventType":{"type":"string","enum":["NONE","MESSAGE","CLOSED","JOINED","SEEN","RATED","INPUT","TAG","UNTAG","TRANSFER"],"default":"NONE","title":"ChateEventType"},"chatChatEvents":{"type":"object","properties":{"Events":{"type":"array","items":{"$ref":"#/definitions/chatChatEvent"}}}},"chatChatWithEvents":{"type":"object","properties":{"Chat":{"$ref":"#/definitions/chatChat"},"Events":{"type":"array","items":{"$ref":"#/definitions/chatChatEvent"}}}},"chatChats":{"type":"object","properties":{"Chats":{"type":"array","items":{"$ref":"#/definitions/chatChat"}}}},"chatChatsWithEvents":{"type":"object","properties":{"Chats":{"type":"array","items":{"$ref":"#/definitions/chatChatWithEvents"}}}},"chatCondition":{"type":"object","properties":{"Join":{"$ref":"#/definitions/chatJoinOperator"},"Key":{"type":"string"},"Operator":{"type":"string"},"Value":{"type":"array","items":{"type":"string"}}}},"chatEmpty":{"type":"object"},"chatId":{"type":"object","properties":{"Id":{"type":"string"}}},"chatJoinOperator":{"type":"string","enum":["None","And","Or"],"default":"None"},"chatRoute":{"type":"object","properties":{"Route":{"type":"array","items":{"$ref":"#/definitions/chatRule"}}}},"chatRouteResult":{"type":"object","properties":{"RuleId":{"type":"string"},"Strategy":{"$ref":"#/definitions/chatAssignStrategy"},"AgentIds":{"type":"array","items":{"type":"string"}}}},"chatRule":{"type":"object","properties":{"Id":{"type":"string"},"AccountId":{"type":"string"},"Priority":{"type":"string"},"Strategy":{"$ref":"#/definitions/chatAssignStrategy"},"AgentIds":{"type":"array","items":{"type":"string"}},"Conditions":{"type":"array","items":{"$ref":"#/definitions/chatCondition"}},"IsDisabled":{"type":"boolean","format":"boolean"},"CreatedTime":{"type":"string"}}},"chatUnread":{"type":"object","properties":{"UserId":{"type":"string"},"Unread":{"type":"integer","format":"int32"}}},"chatUser":{"type":"object","properties":{"Id":{"type":"string"},"Type":{"$ref":"#/definitions/chatUserType"},"LastSeenId":{"type":"string"}}},"chatUserType":{"type":"string","enum":["UndefinedUserType","Visitor","Agent","System"],"default":"UndefinedUserType"},"chatUsersUnread":{"type":"object","properties":{"Unreads":{"type":"array","items":{"$ref":"#/definitions/chatUnread"}}}},"ChatEvent":{"allOf":[{"$ref":"#/definitions/chatChatEvent"},{"required":["Type","SenderId","SenderType","Text","Format","Attachment"],"properties":{"ChatId":{"readOnly":true},"Id":{"readOnly":true},"CreatedTime":{"readOnly":true}}}]},"Error":{"type":"object","properties":{"Code":{"readOnly":true,"type":"integer"},"Message":{"readOnly":true,"type":"string"},"RequestId":{"readOnly":true,"type":"string"}},"required":["Code","Message"]},"Id":{"type":"object","required":["RequestId","Ok","Id"],"properties":{"RequestId":{"type":"string"},"Ok":{"type":"boolean"},"Id":{"type":"string"}}}},"responses":{"BadRequest":{"description":"The server cannot or will not process the request due to an apparent client error (e.g., malformed request syntax, too large size, invalid request message framing, or deceptive request routing)","schema":{"$ref":"#/definitions/Error"},"examples":{"application/json":{"Code":"400010","Messages":"The server cannot or will not process the request due to an apparent client error (e.g., malformed request syntax, too large size, invalid request message framing, or deceptive request routing)"}}},"NotFound":{"description":"The requested resource could not be found but may be available in the future. Subsequent requests by the client are permissible.","schema":{"$ref":"#/definitions/Error"},"examples":{"application/json":{"Code":"404324","Messages":"The requested resource could not be found but may be available in the future. Subsequent requests by the client are permissible."}}},"Unauthorized":{"description":"The request has not been applied because it lacks valid authentication credentials for the target resource.","schema":{"$ref":"#/definitions/Error"},"examples":{"application/json":{"Code":"401344","Messages":"The request has not been applied because it lacks valid authentication credentials for the target resource."}}},"Forbidden":{"description":"The request was valid, but the server is refusing action. The user might not have the necessary permissions for a resource.","schema":{"$ref":"#/definitions/Error"},"examples":{"application/json":{"Code":"403002","Messages":"The request was valid, but the server is refusing action. The user might not have the necessary permissions for a resource."}}},"TooManyRequests":{"description":"The user has sent too many requests in a given amount of time (\"rate limiting\").","headers":{"X-RateLimit-Limit":{"type":"integer","description":"Request limit per hour."},"X-RateLimit-Remaining":{"type":"integer","description":"The number of requests left for the time window."},"X-RateLimit-Reset":{"type":"string","format":"date-time","description":"The UTC date/time at which the current rate limit window"}},"schema":{"$ref":"#/definitions/Error"},"examples":{"application/json":{"Code":"429","Messages":"The server is currently unavailable (because it is overloaded or down for maintenance). Generally, this is a temporary state."}}},"InternalServerError":{"description":"The server is currently unavailable (because it is overloaded or down for maintenance). Generally, this is a temporary state.","schema":{"$ref":"#/definitions/Error"},"examples":{"application/json":{"Code":"500124","Messages":"The server is currently unavailable (because it is overloaded or down for maintenance). Generally, this is a temporary state."}}}}}